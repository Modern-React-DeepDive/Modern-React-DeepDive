# 4-1. 서버 사이드 렌더링이란?

상태: 4. 서버 사이드 렌더링

### 들어가면서

서버 사이드 렌더링 코드를 작성하는 데는 SPA를 만드는 것보다 신경쓸 점이 훨씬 많다.

- 왜 서버 사이드 렌더링이 필요할까?
- 현재 웹의 상황은 어떨까?

# 1. 싱글 페이지 애플리케이션의 세상

먼저 SSR과 반대되는 SPA 개념을 알아보자.

## 1-1. SPA란?

`SPA`란 렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식

- 최초에 첫 페이지에서 데이터 모두 불러옴
- 페이지 전환을 위한 모든 작업은 `JS` 와 브라우저의 `history.pushState`와 `history.replaceState` 로 이루어짐

<img width="619" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-05-20_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9 23 31" src="https://github.com/lgyn10/lgyn10.github.io/assets/72643542/78b01662-5ad5-4e43-92d2-2ac10c087f72">

- 위의 코드를 보면 `<body/>` 내부에 아무런 내용이 없는데, 이는 사이트 렌더링에 필요한 `<body/>` 내부의 내용을 모두 자바스크립트 코드로 삽입한 이후에 렌더링 하기 때문
- 페이지 전환 시 → 새로운 HTML 페이지를 요청하는 것이 아니라, 자바스크립트에서 다음 페이지의 렌더링에 필요한 정보만 HTTP 요청 등으로 가져온 다음, 그 결과를 바탕으로 `<body/>` 내부에 DOM을 추가, 수정, 삭제하는 방법으로 페이지가 전환
- 즉, 최초의 서버에서 데이터를 불러온 후 → 자바스크립트 리소스와 브라우저 API를 기반으로 작동

## 1-2. 전통적인 방식의 애플리케이션과 SPA의 작동 비교

`전통적인 방식` → 페이지 전환 발생할 때마다 새롭게 페이지 요청, HTML 페이지 다운 후 파싱 작업

`SPA` → 최초에 모든 리소스를 다운 후, 자바스크립트로 페이지 전환

## 1-3. SPA 방식의 유행과 JAM 스택의 등장

### LAMP 스택

- `Linux(운영체제)`, `Apache(서버)`, `MySQL(데이터베이스)`, `PHP/Python(웹 프레임워크)` 로 구성된 과거 인기 있었던 웹 개발 구조
- 과거에는 js가 할 수 있는 일이 제한적, 대부분의 처리를 서버에서 담당
- 웹 애플리케이션의 기능이 다양, 사용자 늘어나면서 서버도 확장해야 했지만, 클라우드 개념이 부족했던 당시에는 서버 확장은 매우 번거로웠다.

### JAM 스택

- `JavaScript`, `API`, `Markup` 스택을 일컫음
- 프런트엔드에서 JS와 마크업(HTML,CSS)을 미리 비드해 두고 정적으로 사용자에게 제공하면 이후 작동은 모두 사용자의 클라이언트에서 실행되므로 서버 확장성의 문제에서 자유로움
- `MEAN(MongoDB, Express.js, AngularJS, Node.js)`이나 `MERN(MongoDB, Express.js, ReactJS, Node.js)` 스택처럼 API 서버 자체도 JS로 구현하는 구조 인기

## 1-4. 새로운 패러다임의 웹서비스를 향한 요구

- 자바스크립트 파싱을 위해 CPU 소비 시간이 우상향
- 모든 콘텐츠 로딩 시간 우상향

→ 사용자의 기기와 인터넷 속도 등 웹 전반을 이루는 환경이 크게 개선됐음에도 실제 사용자들이 느끼는 웹 애플리케이션 로딩 속도는 5년 전이나 크게 차이가 없거나 더 느려졌다.

# 2. 서버 사이드 렌더링이란?

`SSR`은 최초에 사용자에게 보여줄 페이지를 서버에서 렌더링해 빠르게 사용자에게 화면을 제공하는 방식

- SSR과 SPA의 차이는 웹페이지 렌더링의 책임을 어디에 두냐는 것

## 2-1. SSR의 장점

### 최초 페이지 진입이 비교적 빠르다

- 사용자가 최초 페이지에 진입했을 때 페이지에 유의미한 정보가 그려지는 시간(`First Contentful Paint`)이 빨라질 수 있다.
- 화면 렌더링이 HTTP 요청에 의존적이거나 렌더링해야 할 HTML의 크기가 커진다면 SSR이 빠를 수 있다.

### 검색 엔진과 SNS 공유 등 메타데이터 제공이 쉽다

- 검색 엔진 최적화에 유용하다. `SEO`

1. 검색 앤진 로봇(머신)이 페이지에 진입
2. 페이지가 HTML 정보를 제공해 로봇이 이 HTML을 다운로드. 단, js 코드는 실행하지 않음
3. 다운로드한 HTML 페이지 내부의 오픈 그래프(`Open Graph`)나 메타(`meta`) 태그 정보를 기반으로 페이지의 검색(공유) 정보를 가져오고 이를 바탕으로 검색 엔진에 저장

### 누적 레이아웃 이동이 적다

### 사용자의 디바이스 성능에 비교적 자유롭다

### 보안에 좀 더 안전하다

## 2-2. SSR의 단점

### 소스코드를 작성할 때 항상 서버를 고려해야 한다

### 적절한 서버가 구축돼 있어야 한다

### 서비스 지연에 따른 문제

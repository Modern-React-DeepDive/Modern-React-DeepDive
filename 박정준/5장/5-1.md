# 5장 리액트와 상태 관리 라이브러리

# 5.1. 상태 관리는 왜 필요한가?

웹 애플리케이션에서 상태로 분류 될수 있는것

- UI: 웹 애플리케이션에서 상호 작용이 가능한 모든 요소의 현재 값. 다크/라이트 모드, 라디오를 비롯한 각종 input, 알림창의 노출 여부 등 많은 종류의 상태가 존재한다.
- URL :브라우저에서 관리되고 있는 상태값, 참고할만한 상태가 존재 할 수 있다.
  - ~.com/rooms/34113796?adults=2
  - roomId=34113796과 adults=2 라는 상태가 존재하며 이 상태는 사용자의 라우팅에 따라 바뀜
- 폼(form): 로딩중(loading)인지, 현재 제출됐는지(submit), 접근이 불가능한지(disabled), 값이 유효한지(validation) 등 모두가 상태로 관리된다.
- 서버에서 가져온 값:클라이언트에서 서버로 요청을 통해 가져온 값도 상태로 볼 수 있다.
  - api 요청

## 5.1.1. 리액트 상태 관리의 역사

### FLUX 패턴의 등장

2014년 경 Flux 라이브러리 소개

- action : 어떠한 작업을 처리할 액션과 그 액션 발생 시 함께 포함시킬 데이터를 의미한다. 액션 타입과 데이터를 각각 정의해 이를 디스패처로 보낸다.
- dispatcher : 액션을 스토어에 보내는 역할을 한다. 콜백 함수 형태로 앞서 액션이 정의한 타입과 데이터를 모두 스토어에 보낸다.
- store : 여기에서 실제 상태에 따른 값과 상태를 변경할 수 있는 메서드를 가지고 있다. 액션의 타입에 따라 어떻게 이를 변경할지가 정의돼 있다.
- view : 리액트의 컴포넌트에 해당, 스토어에 만들어진 데이터를 가져와 화면에 렌더링 하는 역할 ,뷰에서도 사용자의 입력이나 행위에 따라 상태를 ㅇ벋에ㅣ트하고자 할 수 있다. 이 경우 뷰에서 액션을 호출하는 구조

단방향이기에 단점도 존재한다.

코드 많아짐

가장 큰 특징은 단방향

### 시장 지배자 리덕스의 등장

Flux궂 기반에 elm 아키텍처를 도입한 라이브러리

Elm 이란?
웹페이지를 선언적으로 작성하기 위한 언어이다.

- 모델:애플리케이션의 상태를 의미한다
- 뷰 : 모델을 표현하는 HTMl
- 업데이트: 모델을 수정하는 방식

-> 데이터 흐름을 세가지로 분류하고 단방향으로 강제해서 상태를 안정적으로 관리

리덕스는

하나의 상태객체를 스토어에 저장,

이객체를 업데이트하는 작업을 디스패치해 업데이트를 수행

reducer 함수로 발생가능

reducer함수는 웹 애플리케이션 상태에 대한 완전한 새로운 복사본을 반환 한 다음, 애플리케이션에 이 새롭게 만들어진 상태를 전달한다.

### 그렇지만 단점이 존재한다.

- 하나의 상태를 바꾸기 위해서 해야할 일이 많다.
- 어떤 액션인지 타입 선언 필요 등등
- 지금은 어느정도 간소화됨

## context api와 usecontext

단순 레벨의 컴포넌트라면 한두개 정도의 레벨을 넘기는것은 괜찮지만 자식의 깊이가 깊어지면, props 가 컴포넌트를 관통해버리는 현상이 발생한다.

->그렇기에 Context API 등장

그렇지만 Context API는 상태관리가 아니라 주입을 도와주는 기능이며, 렌더링을 막아주는 기능 또한 존재하지 않으니 사용 시 주의가 필요하다.

### 훅의 탄생,. React Query와 SWR

훅의 등장으로 새로운 상태관리가 등장하는데 React Query와 SWR 이다.

이 두 가지 라이브러리는 모두 외부에서 데이터를 불러오는 fetch를 관리하는 데 특화된 라이브러리이다.
API호출에 대한 상태를 관리하고 있기 때문에 HTTP요청에 특화된 상태 관리 라이브러리라고 볼 수 있다.

- useSWR
  - 첫번째 인수 API 주소는 키로도 사용, 다른곳에서 동일한 키로 호출되면 재조회하는것이 아니라 useSWR 이 관리하는 캐시의 값 활용

### Recoi,Zustand,jotai ,Valtio

# 5.2 리액트 훅으로 시작하는 상태 관리

## 5.2.1 가장 기본적인 방법 : useState와 useReducer

useState는 useReducer로 구현됐다. useState나 useReducer 모두 약간의 구현상의 차이만 있을 뿐, 두 훅 모두 지역 상태관리를 위해 만들어졌다.

하지만 훅을 사용할 때마다 컴포넌트별로 초기화되기 때문에 컴포넌트에 따라 서로 다른 상태를 가질 수밖에 없다. -> 전역 상태관리가 아니다.

이렇게 기본적인 useState를 기반으로 한 상태를 지역 상태(local state)라고 하며, 이 지역 상태는 해당 컴포넌트 내에서만 유효하다는 한계가 있다.

### 그렇다면 지역 상태인 변수를 여러 컴포넌트가 동시에 사용할 수 있는 전역 상태로 만들기 위해 어떻게 할 수 있을까?

1. 부모 컴포넌트에서 선언하고 props로 넘겨주기
   - 하지만 props로 제공해야하는 점이 불편할 수 있다.

## 5.2.2 지역 상태의 한계를 벗어나보자 : useState의 상태를 바깥으로 분리하기

useState는 리액트가 만든 클로저 내부에서 관리되어 지역 상태로 생성되기 때문에 해당 컴포넌트에서만 사용할 수 있다는 단점이 있음.

또한 useState로 컴포넌트의 리렌더링을 실행해 최신값을 가져오는 것은 어디까지나 해당 컴포넌트 자체에서만 유효한 전략임.

함수 외부에서 상태를 참조하고 렌더링까지 일어나게 하기 위한 조건

1. 꼭 window나 global에 있어야 할 필요는 없지만 컴포넌트 외부 어딘가에 상태를 두고 여러 컴포넌트가 같이 쓸 수 있어야 한다.
2. 이 외부에 있는 상태를 사용하는 컴포넌트는 상태의 변화를 알아챌 수 있어야 하고 상태가 변화될 때마다 리렌더링이 일어나서 컴포넌트를 최신 상태값 기준으로 렌더링 해야 한다. 이 상태 감지는 상태를 변경시키는 컴포넌트뿐만 아니라 이 상태를 참조하는 모든 컴포넌트에서 동일하게 작동해야 한다.
3. 상태가 원시값이 아닌 객체인 경우는 그 객체에 내가 감지하지 않는 값이 변한다 하더라도 리렌더링이 발생해서는 안된다. 예를 들어 {a: 1, b: 2}라는 상태가 있으며 어느 컴포넌트에서 a를 2로 업데이트했다고 가정하자. 이러한 객체 값의 변화가 단순히 b의 값을 참조하는 컴포넌트에서는 리렌더링을 일으켜서는 안된다는 뜻이다.

방법

1. 사용자 정의 훅
2. useSubscription
